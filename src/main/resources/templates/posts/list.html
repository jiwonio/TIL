<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TIL - 게시글 목록</title>
  <style>
    :root{color-scheme:light dark}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#f6f7f9}
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid #e9edf2;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}
    .brand{font-weight:800;letter-spacing:.2px}
    .actions a,.actions form{margin-left:8px;display:inline-block}
    .btn{padding:8px 12px;border-radius:10px;border:1px solid #d9dee6;background:#fff;color:#0b1f44;font-weight:600;text-decoration:none}
    .btn.primary{background:#1f6feb;color:#fff;border-color:#1f6feb}
    main{max-width:900px;margin:24px auto;padding:0 16px}
    .card{background:#fff;border:1px solid #e9edf2;border-radius:14px;padding:16px;margin:12px 0;display:block;color:inherit;text-decoration:none}
    .title{font-size:18px;margin:0 0 6px}
    .meta{color:#667085;font-size:12px;display:flex;gap:8px;align-items:center}
    .badge{display:inline-block;font-size:11px;padding:2px 6px;border-radius:999px;border:1px solid #d9dee6}
    .empty{color:#667085;text-align:center;margin:40px 0}
  </style>
</head>
<body>
<header>
  <div class="brand"><a th:href="@{/}" style="text-decoration:none;color:inherit">TIL</a></div>
  <div class="actions">
    <a class="btn" th:href="@{/login}" sec:authorize="isAnonymous()">로그인</a>
    <a class="btn" th:href="@{/auth/register}" sec:authorize="isAnonymous()">회원가입</a>
    <a class="btn primary" th:href="@{/posts/new}" sec:authorize="isAuthenticated()">새 글</a>
    <form th:action="@{/logout}" method="post" sec:authorize="isAuthenticated()" style="display:inline">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      <button type="submit" class="btn">로그아웃</button>
    </form>
  </div>
</header>
<main>
  <h1 style="font-size:20px;margin:8px 0 16px">게시글</h1>

  <div th:if="${#lists.isEmpty(posts)}" class="empty">아직 게시글이 없습니다.</div>

  <a th:each="p : ${posts}" class="card" th:href="@{'/posts/' + ${p.id}}">
    <div class="title" th:text="${p.title}">제목</div>
    <div class="meta">
      <span class="badge" th:text="${p.type}">NORMAL</span>
      <span th:text="${#temporals.format(p.createdAt, 'yyyy-MM-dd HH:mm')}">2025-01-01</span>
    </div>
  </a>
</main>
</body>
</html>